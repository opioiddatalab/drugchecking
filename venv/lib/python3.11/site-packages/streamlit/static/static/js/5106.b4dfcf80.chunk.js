"use strict";(self.webpackChunk_streamlit_app=self.webpackChunk_streamlit_app||[]).push([[5106],{87814:function(e,t,i){i.d(t,{K:function(){return o}});var n=i(22951),r=i(91976),a=i(50641),o=function(){function e(){(0,n.Z)(this,e),this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}return(0,r.Z)(e,[{key:"manageFormClearListener",value:function(e,t,i){null!=this.formClearListener&&this.lastWidgetMgr===e&&this.lastFormId===t||(this.disconnect(),(0,a.bM)(t)&&(this.formClearListener=e.addFormClearedListener(t,i),this.lastWidgetMgr=e,this.lastFormId=t))}},{key:"disconnect",value:function(){var e;null===(e=this.formClearListener)||void 0===e||e.disconnect(),this.formClearListener=void 0,this.lastWidgetMgr=void 0,this.lastFormId=void 0}}]),e}()},5106:function(e,t,i){i.r(t),i.d(t,{default:function(){return Z}});var n=i(50189),r=i(22951),a=i(91976),o=i(47169),l=i(67591),s=i(94337),u=i(66845),d=i(72706),m=i(70461),c=i(25621),h=i(52347),f=i(87814),p=i(16295),g=i(50641),b=i(53608),v=i.n(b),y=i(98478),T=i(86659),R=i(8879),k=i(68411),V=i(1515),x=i(35704),w=(0,V.Z)("div",{target:"ew7r33m3"})((function(e){var t=e.disabled,i=e.theme;return{alignItems:"center",backgroundColor:t?i.colors.gray:i.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",height:i.radii.xl,justifyContent:"center",width:i.radii.xl,":focus":{outline:"none"},":focus-visible":{boxShadow:"0 0 0 0.2rem ".concat((0,x.DZ)(i.colors.primary,.5))}}}),""),C=(0,V.Z)("div",{target:"ew7r33m2"})((function(e){var t=e.disabled,i=e.theme;return{fontFamily:i.genericFonts.codeFont,fontSize:i.fontSizes.sm,paddingBottom:i.spacing.twoThirdsSmFont,color:t?i.colors.gray:i.colors.primary,top:"-22px",position:"absolute",whiteSpace:"nowrap",backgroundColor:i.colors.transparent,lineHeight:i.lineHeights.base,fontWeight:"normal"}}),""),F=(0,V.Z)("div",{target:"ew7r33m1"})((function(e){var t=e.theme;return{paddingBottom:t.spacing.none,paddingLeft:t.spacing.none,paddingRight:t.spacing.none,paddingTop:t.spacing.twoThirdsSmFont,justifyContent:"space-between",alignItems:"center",display:"flex"}}),""),S=(0,V.Z)("div",{target:"ew7r33m0"})((function(e){var t=e.disabled,i=e.theme;return{lineHeight:i.lineHeights.base,fontWeight:"normal",fontSize:i.fontSizes.sm,fontFamily:i.genericFonts.codeFont,color:t?i.colors.fadedText40:"inherit"}}),""),D=i(40864),M=function(e){(0,l.Z)(i,e);var t=(0,s.Z)(i);function i(e){var a;return(0,r.Z)(this,i),(a=t.call(this,e)).formClearHelper=new f.K,a.state=void 0,a.sliderRef=u.createRef(),a.thumbRef=[],a.thumbValueRef=[],a.commitWidgetValueDebounced=void 0,a.commitWidgetValue=function(e){a.props.widgetMgr.setDoubleArrayValue(a.props.element,a.state.value,e)},a.onFormCleared=function(){a.setState((function(e,t){return{value:t.element.default}}),(function(){return a.commitWidgetValue({fromUi:!0})}))},a.handleChange=function(e){var t=e.value;a.setState({value:t},(function(){return a.commitWidgetValueDebounced({fromUi:!0})}))},a.renderThumb=u.forwardRef((function(e,t){var i,r=e.$value,o=e.$thumbIndex,l=o||0;a.thumbRef[l]=t,(i=a.thumbValueRef)[l]||(i[l]=u.createRef());var s=r?a.formatValue(r[o]):"",m=(0,d.pick)(e,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]);return a.props.element.options.length>0||a.isDateTimeType(),a.thumbValueAlignment(a.thumbRef[l].current,a.thumbValueRef[l].current),(0,D.jsx)(w,(0,n.Z)((0,n.Z)({},m),{},{disabled:!0===e.$disabled,ref:a.thumbRef[l],"aria-valuetext":s,"aria-label":a.props.element.label,children:(0,D.jsx)(C,{className:"StyledThumbValue","data-testid":"stThumbValue",disabled:!0===e.$disabled,ref:a.thumbValueRef[l],children:s})}))})),a.renderTickBar=function(){var e=a.props,t=e.disabled,i=e.element,n=i.max,r=i.min;return(0,D.jsxs)(F,{"data-testid":"stTickBar",children:[(0,D.jsx)(S,{disabled:t,"data-testid":"stTickBarMin",children:a.formatValue(r)}),(0,D.jsx)(S,{disabled:t,"data-testid":"stTickBarMax",children:a.formatValue(n)})]})},a.commitWidgetValueDebounced=(0,g.Ds)(200,a.commitWidgetValue.bind((0,o.Z)(a))),a.state={value:a.initialValue},a}return(0,a.Z)(i,[{key:"initialValue",get:function(){var e=this.props.widgetMgr.getDoubleArrayValue(this.props.element);return void 0!==e?e:this.props.element.default}},{key:"componentDidMount",value:function(){for(var e=this,t=function(t){setTimeout((function(){e.thumbValueAlignment(e.thumbRef[t].current,e.thumbValueRef[t].current)}),0)},i=0;i<Math.min(this.thumbRef.length,this.thumbValueRef.length);i++)t(i);this.props.element.setValue?this.updateFromProtobuf():this.commitWidgetValue({fromUi:!1})}},{key:"componentDidUpdate",value:function(){this.maybeUpdateFromProtobuf()}},{key:"componentWillUnmount",value:function(){this.formClearHelper.disconnect()}},{key:"maybeUpdateFromProtobuf",value:function(){this.props.element.setValue&&this.updateFromProtobuf()}},{key:"updateFromProtobuf",value:function(){var e=this,t=this.props.element.value;this.props.element.setValue=!1,this.setState({value:t},(function(){e.commitWidgetValue({fromUi:!1})}))}},{key:"value",get:function(){var e=this.props.element,t=e.min,i=e.max,n=this.state.value,r=n[0],a=n.length>1?n[1]:n[0];return r>a&&(r=a),r<t&&(r=t),r>i&&(r=i),a<t&&(a=t),a>i&&(a=i),n.length>1?[r,a]:[r]}},{key:"isDateTimeType",value:function(){var e=this.props.element.dataType;return e===p.iR.DataType.DATETIME||e===p.iR.DataType.DATE||e===p.iR.DataType.TIME}},{key:"formatValue",value:function(e){var t=this.props.element,i=t.format,n=t.options;return this.isDateTimeType()?v().utc(e/1e3).format(i):n.length>0?(0,h.sprintf)(i,n[e]):(0,h.sprintf)(i,e)}},{key:"thumbValueAlignment",value:function(e,t){var i=this.sliderRef.current;if(i&&e&&t){var n=i.getBoundingClientRect(),r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.left+r.width/2,l=o-a.width/2<n.left,s=o+a.width/2>n.right;t.style.left=l?"0":"",t.style.right=s?"0":""}}},{key:"render",value:function(){var e,t=this.props,i=t.disabled,r=t.element,a=t.theme,o=t.width,l=t.widgetMgr,s=a.colors,u=a.fonts,d=a.fontSizes,c=a.spacing,h={width:o};return this.formClearHelper.manageFormClearListener(l,r.formId,this.onFormCleared),(0,D.jsxs)("div",{ref:this.sliderRef,className:"stSlider",style:h,children:[(0,D.jsx)(y.O,{label:r.label,disabled:i,labelVisibility:(0,g.iF)(null===(e=r.labelVisibility)||void 0===e?void 0:e.value),children:r.help&&(0,D.jsx)(T.dT,{children:(0,D.jsx)(R.Z,{content:r.help,placement:k.u.TOP_RIGHT})})}),(0,D.jsx)(m.Z,{min:r.min,max:r.max,step:r.step,value:this.value,onChange:this.handleChange,disabled:i,overrides:{Root:{style:{paddingTop:c.twoThirdsSmFont}},Thumb:this.renderThumb,Tick:{style:{fontFamily:u.monospace,fontSize:d.sm}},Track:{style:{backgroundColor:"none !important",paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:c.twoThirdsSmFont}},InnerTrack:{style:function(e){var t=e.$disabled;return(0,n.Z)({height:"4px"},t?{background:s.darkenedBgMix25}:{})}},TickBar:this.renderTickBar}})]})}}]),i}(u.PureComponent),Z=(0,c.b)(M)}}]);